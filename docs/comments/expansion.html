<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
	<meta charset="utf-8"/>
	<link type="text/css" rel="stylesheet" href="mystyle.css"/>
</head>
<body>

<h1 id="扩展">扩展</h1>

<h2 id="expansion-cshjunkiehistory">选项 CSH_JUNKIE_HISTORY 对扩展引用的影响</h2>

<p>未设置 cshjunkiehistory (默认)</p>

<pre><code>bsd% PS1=&quot;%\!%)%m%# &quot;         # 设置提示符以方便观察事件号
2)bsd% echo p1 p2             # 准备两个事件
p1 p2
3)bsd% echo p3 p4
p3 p4
4)bsd% echo !2:1 !:2          # !2:1 引用2号事件的第一个词， !:2 引用同一事件（即2号事件）的第二个词
echo p1 p2
p1 p2
5)bsd% echo !3:1 !:2          # !3:1 引用3号事件的第一个词， !:2 引用同一事件（即3号事件）的第二个词
echo p3 p4
p3 p4
</code></pre>

<p>设置 cshjunkiehistory 后</p>

<pre><code>bsd% setopt cshjunkiehistory     
bsd% PS1=&quot;%\!%)%m%# &quot;
3)bsd% echo p1 p2
p1 p2
4)bsd% echo p3 p4
p3 p4
5)bsd% echo !3:1 !:2          # !3:1 引用3号事件的第一个词， !:2 引用上一个事件（即4号事件）的第二个词
echo p1 p4
p1 p4
</code></pre>

</body>
</html>

